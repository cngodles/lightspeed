<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">

<title>Speed of Light Simulation</title>
<link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet">
<style type="text/css">
body { margin:0; font-family: 'Open Sans', sans-serif;}
#solarsystem { position:fixed; width:100%; height:100%; background-color:#ddd; font-size:0; }

.planet { width: 1%; height:100%; display:inline-block; border-right:1px solid #333; box-sizing:border-box; font-size:10px; position:relative; cursor: pointer; transition: all 320ms ease-in-out; }
.planet:not(.open):hover { background-color: blue; color:#fff; transition: none; }
.planet.open { width: 92%; cursor: default; }
  
  
.planet.open i { position:absolute; display:block; height:4%; top:44%; width:0; background-color:yellow; }
.planet.done i { position:absolute; display:block; height:4%; top:44%; width:100%; background-color:yellow; }


div.planet:before { position:absolute; top:0; width: 100%; text-align:left; padding:0; font-size:14px; transform: rotate(90deg); transform-origin: bottom left; }  
div.planet.open:before { top:20px; text-align:center; padding:20px; font-size:18px; transform: rotate(0); }  

  
div.planet:before { content:attr(data-name); }
div.planet.open:before { content:attr(data-name); }
	
@keyframes beam {
  from {width:0;}
  to {width: 100%;}
}

</style>
</head>
<body>
<div id="solarsystem">
	<!--
  <div data-no="1" id="mercury" class="planet open"><i> </i></div>
  <div data-no="2" id="venus" class="planet"><i></i></div>
  <div data-no="3" id="earth" class="planet"><i></i></div>
  <div data-no="4" class="planet"><i></i></div>
  <div data-no="5" class="planet"><i></i></div>
  <div data-no="6" class="planet"><i></i></div>
  <div data-no="7" class="planet"><i></i></div>
  <div data-no="8" class="planet"><i></i></div>
  <div data-no="9" class="planet"><i></i></div>
	-->
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="js/jquery.transit.min.js"></script>
	<script>
	
var lightspeed = {
	init:function(){
		var returnhtml = [];
		for(var i = 0; i < planets.length; i++){
			var mer = (autokm(planets[i].span)/c).toFixed(3);
  		var merms = mer * 1000;
			returnhtml.push(''+
			'<div class="planet" '+
			'data-no="'+i+'" '+
			'data-name="'+planets[i].name+'" '+
			'data-au="'+planets[i].au+'" '+
			'data-span="'+planets[i].span+'"'+
			'data-await="'+merms+'"'+
			'><i></i></div>');
		}
		$("#solarsystem").html(returnhtml.join("\n"));
		$(".planet:first-child").addClass("open");
		var timing = $(".planet.open").data("await");
		//$(".planet.open").find("i").css({"animate":"beam "+timing+" linear 1"});
		$(".planet.open").find("i").transition({"width":"100%"}, timing, "linear");
	}
};

var planets = [
  { 
    name:"Mercury",
		au:0.39,
		span:0.39,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  },
	{ 
    name:"Venus",
		au:0.72,
		span:0.33,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  },
	{ 
    name:"Earth",
		au:1,
		span:0.28,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  },
	{ 
    name:"Mars",
		au:1.52,
		span:0.52,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  },
	{ 
    name:"Jupiter",
		au:5.20,
		span:3.68,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  },
	{ 
    name:"Saturn",
		au:9.58,
		span:4.38,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  },
	{ 
    name:"Uranus",
		au:19.20,
		span:9.62,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  },
	{ 
    name:"Neptune",
		au:30.05,
		span:10.85,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  },
	{ 
    name:"Pluto",
		au:39.48,
		span:9.43,
    facts:[
      "Fact 1", "Fact 2", "Fact 3", "Fact 4", "Fact 5"
    ]
  }
];

function autokm(au){
  //To 3 decimals by default.
  var returnval = (au * 149597870.7).toFixed(3);
  return returnval;
}

var au = 149597870.7; //KM
var c = 299792.4; //KM/s

$(document).ready(function(){
  lightspeed.init();
	/*
	var mer = (autokm(planets.Mercury.au)/c).toFixed(3);
  var merms = mer * 1000;
  console.log(merms);
  $(".planet.open i").animate({"width":"100%"}, merms, 'linear');
	*/
})
.on("click", ".planet", function(){
  $(".planet").removeClass("open");
	$(".planet").find("i").remove();
  $(this).addClass("open").html("<i></i>");
	var timing = $(this).data("await");
	$(this).find("i").transition({"width":"100%"}, timing, "linear");
})
.on("transitionend", ".planet.open i", function(){
	console.log("We made it!");
})
;  
</script>
</body>
</html>
